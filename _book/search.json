[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Proof of concept for health indicators",
    "section": "",
    "text": "1 Introduction\nOutline an end-to-end process for creating public health indicators and generating public health profiles.\n\n\n\n\n\n\nflowchart TD\n\nA[Source datasets] --&gt; B[Cleaning] \nB --&gt; C[Recode area names to match across datasets] --&gt; E\nD --&gt; E[Aggregate indicator data by gender, age-band and area]\nB --&gt; D[Create age bands from ages]\nE --&gt; F[Link aggregate indicator data to population data]\nF --&gt; G[Calculate rate and unceratinty intervals]\nG --&gt; H[Pool regional rates across indicators]\nH--&gt; I[Generate regional profile visualisations]\n\nclassDef green fill:#9f6,stroke:#333,stroke-width:2px;\n     classDef orange fill:#f96,stroke:#333,stroke-width:4px;\n     class D,e green\n     class B orange\n\n\n\n\n\n\nFigure 1.1: Workflow",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "eda.html",
    "href": "eda.html",
    "title": "2  Rapid EDA",
    "section": "",
    "text": "A first step is to rapidly evaluate raw data.\nIn creating regional health indicators and profiles\nStore data in a single directory\n\n\nCode\ndir &lt;- here(\"data\")\n\nxl_files &lt;- fs::dir_ls(dir, regexp = \"xls\")\n\ncsv_files &lt;- fs::dir_ls(dir, regexp = \"csv\")\n\n## read_files \n\nxl &lt;- map(xl_files, read_xlsx)\ncsvs &lt;- map(csv_files, read_csv)\n\n\n\n\nCode\nmap(xl, colnames)\nmap(csvs, colnames)\n\n\n\nArea name labels\n\n\nDataset\nArea field name\n\n\n\n\nAMR\nNo area variable\n\n\nInjury\nRegion\n\n\nFlu\nregion_en\n\n\nSmoking\ndirectorate_name\n\n\nPopulations\nRegion\n\n\n\nTo facilitate data linkage and creating indicator datasets, area variable names should be consistent between datasets.\nDirectorate is not equivalent to region.\nThere are 13 KSA regions and 20 health directorates\n\n2.0.1 Area variable names\n\n\nCode\n## rename area variables\n\ncsvs$`/Users/julianflowers/poc/data/Flu Vaccine Coverage 2023 updated.csv` &lt;- rename(csvs$`/Users/julianflowers/poc/data/Flu Vaccine Coverage 2023 updated.csv`, Region = region_en)\n\n#csvs$`/Users/julianflowers/poc/data/Flu Vaccine Coverage 2023 updated.csv`\n\n\n\n\n2.0.2 Area names\n\n\nCode\nflu_areas &lt;- csvs$`/Users/julianflowers/poc/data/Flu Vaccine Coverage 2023 updated.csv` |&gt;\n    select(Region) |&gt; unique()\n\nsmoking_areas &lt;- csvs$`/Users/julianflowers/poc/data/Smoking 2022.csv` |&gt;\n    select(directorate_name) |&gt; unique()\n\npop_areas &lt;- csvs$`/Users/julianflowers/poc/data/Translated_Population_Data_with_Governorates.csv` |&gt;\n    select(Region) |&gt; unique()\n\ninjury_areas &lt;- xl$`/Users/julianflowers/poc/data/Nonfatal Hospitalizations for Injuries data 2023 (8-7-2024).xlsx` |&gt; select(Region) |&gt; unique()\n\nn_areas &lt;- data.frame(data = c(\"flu_areas\", \"smoking_areas\", \"pop_areas\", \"injury_areas\"), no_areas = map_dbl(list(flu_areas, smoking_areas, pop_areas, injury_areas), nrow), area_type = c(\"region\", \"directorate\", \"region\", \"region\")) |&gt;\n    knitr::kable()\n\n\nThe number of unique areas\n\n\n\ndata\nno_areas\narea_type\n\n\n\n\nflu_areas\n13\nregion\n\n\nsmoking_areas\n20\ndirectorate\n\n\npop_areas\n13\nregion\n\n\ninjury_areas\n12\nregion\n\n\n\n\n\nCode\nsetdiff(flu_areas, pop_areas)\n\n\n# A tibble: 9 × 1\n  Region              \n  &lt;chr&gt;               \n1 Riyadh              \n2 Sharqiya            \n3 Makkah Al Mukarramah\n4 Asir                \n5 madina              \n6 Al Qassim           \n7 Hail                \n8 Al Baha             \n9 Northern Frontier   \n\n\nCode\nsetdiff(pop_areas, injury_areas)\n\n\n# A tibble: 10 × 1\n   Region                   \n   &lt;chr&gt;                    \n 1 Al Bahah                 \n 2 Al Hudud ash Shamaliyah  \n 3 Ar Riyadh                \n 4 Al Qasim                 \n 5 Al Madinah al Munawwarah \n 6 Al Mintaqah ash Sharqiyah\n 7 Tabuk                    \n 8 Ha'il                    \n 9 'Asir                    \n10 Makkah al Mukarramah     \n\n\nCode\nsetdiff(injury_areas, flu_areas)\n\n\n# A tibble: 2 × 1\n  Region \n  &lt;chr&gt;  \n1 Makkah \n2 Madinah",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Rapid EDA</span>"
    ]
  },
  {
    "objectID": "lookups.html",
    "href": "lookups.html",
    "title": "3  Data preparation and cleaning",
    "section": "",
    "text": "3.1 Data prep and clening",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Data preparation and cleaning</span>"
    ]
  },
  {
    "objectID": "lookups.html#data-prep-and-clening",
    "href": "lookups.html#data-prep-and-clening",
    "title": "3  Data preparation and cleaning",
    "section": "",
    "text": "3.1.1 Creating a lookup table for KSA regions and health directorates\n\nPopulation estimates by age, gender and region - downloaded from detailed census data 2022. source: https://portal.saudicensus.sa/portal/public/1/15/101464?type=TABLE; translated into English using ChatGPT4o.\nThis gives populations for 13 regions; smoking and injury date is based on health directorates - 20 units.\nFor these analyses aggregated directorates to regions to enable rate calculations\nTo map directorates to regions following steps were undertaken:\n\nShape file for KSA regional boundaries obtained from …\nDirectorate based locations of smoking cessation clinics were scraped from https://www.moh.gov.sa/en/Ministry/Projects/TCP/Pages/default.aspx\nLocations were spatially joined to KSA regional boundaries to create a region &lt;-&gt; directorate lookup\n\nNaming systems differed between datasets so renaming and recoding necessary\n\n\n\n\n\n\n\nflowchart LR\n\nA[Comparison] --&gt; B[Within population] \nB --&gt; C[Over time] --&gt; I[Against standard or target]\nC --&gt; J[Slope / regression coefficient]\nB --&gt; K[Within subgroups e.g. age, sex, SES]\nA --&gt; D[Between populations]\nD --&gt; E[Cross-sectional variation]\nD --&gt; F[Compare summary trends]\nD --&gt; G[Compare trend in variation]\n\nclassDef green fill:#9f6,stroke:#333,stroke-width:2px;\n     classDef orange fill:#f96,stroke:#333,stroke-width:4px;\n     class D,e green\n     class B orange\n\n\n\n\n\nFigure 3.1: Comparative analysis\n\n\n\n\n\n\n\n3.1.2 Region names\n\n\nCode\ndevtools::install_github(\"yutannihilation/ggsflabel\")\nneeds(tidyverse, data.table, readxl, myScrapers, sf, curl, ggsflabel)\n\npops &lt;- fread(\"/Users/julianflowers/Library/CloudStorage/GoogleDrive-julian.flowers12@gmail.com/My Drive/Saudi/data/pop_ests.csv\")\n\nregion_names &lt;- pops$Region |&gt; unique()\n\nregion_names |&gt;\n    enframe()\n\n\n# A tibble: 13 × 2\n    name value                    \n   &lt;int&gt; &lt;chr&gt;                    \n 1     1 Al Bahah                 \n 2     2 Al Jawf                  \n 3     3 Al Hudud ash Shamaliyah  \n 4     4 Ar Riyadh                \n 5     5 Al Qasim                 \n 6     6 Al Madinah al Munawwarah \n 7     7 Al Mintaqah ash Sharqiyah\n 8     8 Tabuk                    \n 9     9 Jazan                    \n10    10 Ha'il                    \n11    11 'Asir                    \n12    12 Makkah al Mukarramah     \n13    13 Najran                   \n\n\nCode\n## region names for injury data (NB only 12 names)\ndf_r &lt;- read_xlsx(\"/Users/julianflowers/spha/data/fwdatastrategypocpublichealthframeworkindicators/Nonfatal Hospitalizations for Injuries data 2023 (8-7-2024).xlsx\") |&gt; pluck(\"Region\") |&gt; unique()\n\n## directorate names for smoking data\nsmok &lt;- read_csv(\"/Users/julianflowers/spha/data/fwdatastrategypocpublichealthframeworkindicators/Smoking 2022.csv\") \n\n\n\n\n3.1.3 Scrape smoking clinic locations\n\n\nCode\nurl &lt;- \"https://www.moh.gov.sa/en/Ministry/Projects/TCP/Pages/default.aspx\"\n\nscc_dir &lt;- get_page_links(url) %&gt;%\n  .[159:178] \n\nsc_dir_links &lt;- paste0(\"https://www.moh.gov.sa\", scc_dir)\n\nsc_dir_names &lt;- sc_dir_links |&gt;\n  basename()\n\n## extract Google maps link of scc for each region and create data frame\nsc_loc &lt;- map(sc_dir_links, get_page_links) %&gt;%\n  map(\\(x) x[grepl(\"https://goo.gl\", x)]) %&gt;%\n    set_names(., sc_dir_names) |&gt;\n  enframe() |&gt;\n    mutate(name = str_remove(name, \".aspx\"))\n\n\n\n\n3.1.4 Function to extract coordinates from google map links\n\n\nCode\nget_coordinates_from_google_maps &lt;- function(url) {\n  # Follow the redirect to get the final URL\n  url &lt;- url\n  response &lt;- HEAD(url, config(followlocation = TRUE))\n  final_url &lt;- response$url\n  \n  # Use a regular expression to find the coordinates in the final URL\n  match &lt;- str_match(final_url, \"@(-?\\\\d+\\\\.\\\\d+),(-?\\\\d+\\\\.\\\\d+)\")\n  if (!is.na(match[1,2]) && !is.na(match[1,3])) {\n    latitude &lt;- as.numeric(match[1,2])\n    longitude &lt;- as.numeric(match[1,3])\n    return(list(latitude = latitude, longitude = longitude))\n  } else {\n    return(NULL)\n  }\n}\n\n\n\n\n3.1.5 Extract smoking clinic coordinates\n\n\nCode\nsc_coords &lt;- sc_loc |&gt;\n  unnest(value) |&gt;\n  mutate(ll = map(value, get_coordinates_from_google_maps, .progress = TRUE))\n\n## create table of sc clinic locations \nsc_ll &lt;- sc_coords |&gt;\n    unnest_wider(ll)\n\n## convert to sf file (need to remove missing coordinate values)\n\nsc_ll_sf &lt;- sc_ll |&gt;\n    drop_na() |&gt;\n    st_as_sf(coords = c(\"longitude\", \"latitude\"), crs = 4326)\n\n\n\n\n3.1.6 Obtain KSA region boundary file\n\n\nCode\nsa_shp &lt;- curl_download(\"https://data.humdata.org/dataset/41ce9023-1d21-4549-a485-94316200aba0/resource/a0188b1b-2f40-4f27-8a43-25913a7378ca/download/sau_adm_gadm_20210525_shp.zip\", destfile = tempfile())\n\ntmpd &lt;- tempdir()\n\nsa_shp_1 &lt;- curl_download(\"https://data.humdata.org/dataset/41ce9023-1d21-4549-a485-94316200aba0/resource/99834c81-ad34-415e-91c5-af053d8e55b4/download/sau_capp_adm1_1m_ocha.zip\", destfile = tempfile())\n\n#sa_pop_d &lt;- curl_download(\"https://data.humdata.org/dataset/14b288ca-1855-4025-9f01-41cba548e6f6/resource/44baa2f6-b6d8-4018-b9c6-fd81b493ec22/download/sau_general_2020_geotiff.zip\", destfile = tempfile())\n\nsa_shp &lt;- unzip(sa_shp, exdir = tmpd)\n\nsa_shp_1 &lt;- unzip(sa_shp_1, exdir = tmpd)\n\n#sa_tif &lt;- unzip(sa_pop_d, exdir = tmpd)\n\nshps &lt;- fs::dir_ls(tmpd, regexp = \"shp$\")\n\n## boundary polygon file\nsa_bound &lt;- read_sf(shps[2]) \n\n\n\n\n3.1.7 Map smoking clinic locations against regional boundaries\n\n\nCode\nsa_bound |&gt;\n    ggplot() +\n    geom_sf(fill = \"grey90\") +\n    geom_sf_label_repel(aes(label = ADM1_EN)) +\n    geom_sf(data = sc_ll_sf, aes(colour = name)) +\n    theme_void() +\n    scale_colour_viridis_d(option = \"turbo\", name = \"Directorates\")\n\n\n\n\n\n\n\n\nFigure 3.2: SCC location map with regional boundaries\n\n\n\n\n\n\n\n3.1.8 Create a geographical lookup table\n\n\nCode\nreg_dir_lu &lt;- sa_bound |&gt;\n    st_join(sc_ll_sf) |&gt;\n    st_drop_geometry() |&gt;\n    select(ADM1_EN, name) |&gt;\n    group_by(ADM1_EN, name) |&gt;\n    summarise(n = n()) |&gt;\n    ungroup() |&gt;\n    group_by(name) |&gt;\n    arrange(name) |&gt;\n    filter(n == max(n)) |&gt;\n    select(name, everything())\n\n\nNow we want to attach region names tpo the smoking data so we can join with population data in order to calculate attendance rates by age.\n\n\n3.1.9 Map directorates to regions\n\n\nCode\npops$Region |&gt;\n    unique() |&gt;\n    enframe() \n\n\n# A tibble: 13 × 2\n    name value                    \n   &lt;int&gt; &lt;chr&gt;                    \n 1     1 Al Bahah                 \n 2     2 Al Jawf                  \n 3     3 Al Hudud ash Shamaliyah  \n 4     4 Ar Riyadh                \n 5     5 Al Qasim                 \n 6     6 Al Madinah al Munawwarah \n 7     7 Al Mintaqah ash Sharqiyah\n 8     8 Tabuk                    \n 9     9 Jazan                    \n10    10 Ha'il                    \n11    11 'Asir                    \n12    12 Makkah al Mukarramah     \n13    13 Najran                   \n\n\nCode\nsmok_1 &lt;- smok |&gt;\n    mutate(directorate_name = recode(directorate_name, \"Qurayyat\" = \"Al-Qurayyat\", \n                                     \"Qunfotha\" = \"AL-Qunfudah\", \n                                     \"AlAhsa\" = \"Al-Ahsa\", \n                                     \"Baha\" = \"Al-Baha\",\n                                     \"Eastern\" = \"Eastern-Region\", \n                                     \"Hafer AlBatin\" = \"Hafr-Al-Batin\",\n                                     \"Northern Borders\" = \"Northern-Borders\",\n                                     \"Qassim\" = \"Al-Qassim\", \n                                     \"Jouf\" = \"Al-Jouf\"\n                                     )) |&gt;\n    left_join(reg_dir_lu, by = c(\"directorate_name\" = \"name\")) \n    #left_join(pops, by = c(\"ADM1_EN\" = \"Region\"))\n\n\n\n\n3.1.10 Link smoking frequencies to population data\n\n\nCode\npops &lt;- pops |&gt;\n    mutate(age = parse_number(`Single Age Group`))\n\npops$Region |&gt;\n    unique()\n\n\n [1] \"Al Bahah\"                  \"Al Jawf\"                  \n [3] \"Al Hudud ash Shamaliyah\"   \"Ar Riyadh\"                \n [5] \"Al Qasim\"                  \"Al Madinah al Munawwarah\" \n [7] \"Al Mintaqah ash Sharqiyah\" \"Tabuk\"                    \n [9] \"Jazan\"                     \"Ha'il\"                    \n[11] \"'Asir\"                     \"Makkah al Mukarramah\"     \n[13] \"Najran\"                   \n\n\nCode\nsmok_pops_region &lt;- smok_1 |&gt;\n    mutate(Gender = str_to_title(patient_gender)) |&gt;\n    count(ADM1_EN, age, Gender) \n\n\n## recode region names (ADM1_EN)\n\n# smok_pops_region |&gt;\n#     mutate(Region = recode(ADM1_EN, \n#                            \"`Asir\" = \"'Asir\", \n#                            \"Ash Sharqiyah\" = \"Al Hudud ash Sharqiyah\", \n#                            \"Al Madinah\" = ))\n\nsmok_pops_region &lt;- smok_pops_region |&gt;\n    full_join(pops, by = c(\"ADM1_EN\" = \"Region\", \"age\", \"Gender\")) \n\n\n\n## sense check\nsmok_pops_region |&gt;\n    count(Gender, ADM1_EN, `18-44`) |&gt;\n    print(n = 42)\n\n\n# A tibble: 69 × 4\n   Gender ADM1_EN                   `18-44`     n\n   &lt;chr&gt;  &lt;chr&gt;                     &lt;chr&gt;   &lt;int&gt;\n 1 Female 'Asir                     18-44     967\n 2 Female 'Asir                     other    2206\n 3 Female Al Bahah                  18-44     535\n 4 Female Al Bahah                  other    1178\n 5 Female Al Hudud ash Shamaliyah   18-44     216\n 6 Female Al Hudud ash Shamaliyah   other     522\n 7 Female Al Jawf                   18-44     216\n 8 Female Al Jawf                   other     522\n 9 Female Al Madinah                &lt;NA&gt;       17\n10 Female Al Madinah al Munawwarah  18-44     484\n11 Female Al Madinah al Munawwarah  other    1133\n12 Female Al Mintaqah ash Sharqiyah 18-44     648\n13 Female Al Mintaqah ash Sharqiyah other    1568\n14 Female Al Qasim                  18-44     699\n15 Female Al Qasim                  other    1592\n16 Female Al Quassim                &lt;NA&gt;        4\n17 Female Ar Riyad                  &lt;NA&gt;       21\n18 Female Ar Riyadh                 18-44    1241\n19 Female Ar Riyadh                 other    2866\n20 Female Ash Sharqiyah             &lt;NA&gt;       19\n21 Female Ha'il                     18-44     482\n22 Female Ha'il                     other    1045\n23 Female Jazan                     18-44     913\n24 Female Jazan                     other    2270\n25 Female Jizan                     &lt;NA&gt;        5\n26 Female Makkah                    &lt;NA&gt;       23\n27 Female Makkah al Mukarramah      18-44     917\n28 Female Makkah al Mukarramah      other    2224\n29 Female Najran                    18-44     372\n30 Female Najran                    other     821\n31 Female Tabuk                     18-44     376\n32 Female Tabuk                     other     876\n33 Female `Asir                     &lt;NA&gt;       14\n34 Male   'Asir                     18-44     967\n35 Male   'Asir                     other    2293\n36 Male   Al Bahah                  18-44     539\n37 Male   Al Bahah                  other    1228\n38 Male   Al Hudud ash Shamaliyah   18-44     216\n39 Male   Al Hudud ash Shamaliyah   other     520\n40 Male   Al Jawf                   18-44     216\n41 Male   Al Jawf                   other     531\n42 Male   Al Jawf                   &lt;NA&gt;        1\n# ℹ 27 more rows\n\n\n\n\n3.1.11 Calculate regional smoking rates\n\n\nCode\n## 18-44 F\nsmok_18_44 &lt;- smok_pops_region |&gt;\n    filter(Gender == \"Female\", `18-44` == \"18-44\") |&gt;\n    group_by(ADM1_EN) |&gt;\n    reframe(n = n(), \n            sum_pop = sum(Population), \n            rate_100k = 100000 * n / sum_pop)\n\n    smok_18_44_ci &lt;- PHEindicatormethods::phe_rate(smok_18_44, n, sum_pop, multiplier = 100000)\n\nsmok_18_44_ci |&gt;\n    ggplot() +\n    geom_col(aes(reorder(ADM1_EN, -rate_100k), rate_100k), fill = \"goldenrod\") +\n    geom_point(aes(reorder(ADM1_EN, -rate_100k), rate_100k, colour = n)) +\n    geom_linerange(aes(x = ADM1_EN, ymin = lowercl, ymax = uppercl)) +\n    labs(y = \"\", \n         x = \"Region\n         \") +\n    theme(axis.text.x = element_text(angle = 45, hjust = 1))\n\n\n\n\n\n\n\n\n\nCode\n## 15+\n\nsmok_15_ &lt;- smok_pops_region |&gt;\n    filter(`15+` == \"15+\") |&gt;\n    group_by(ADM1_EN) |&gt;\n    reframe(n = n(), \n            sum_pop = sum(Population), \n            rate_100k = 100000 * n / sum_pop)\n\nsmok_15_ci &lt;- PHEindicatormethods::phe_rate(smok_15_, n, sum_pop,  multiplier = 100000)\n\nsmok_15_ci |&gt;\n    ggplot() +\n    geom_point(aes(reorder(ADM1_EN, rate_100k), rate_100k)) +\n    geom_linerange(aes(x = ADM1_EN, ymin = lowercl, ymax = uppercl)) +\n    coord_flip() +\n    labs(x = \"\")\n\n\n\n\n\n\n\n\n\nCode\n## AS specific\n\nsmok_pops_region |&gt;\n    #filter(`15+` == \"15+\") |&gt;\n    group_by(ADM1_EN, `Five-Year Age Group`, Gender) |&gt;\n    reframe(n = n(), \n            sum_pop = sum(Population), \n            rate_100k = 100 * n / sum_pop) |&gt;\n   # select(-c(n, sum_pop)) |&gt;\n    pivot_wider(-c(n, rate_100k), names_from = c(\"Gender\", \"Five-Year Age Group\"), values_from = \"sum_pop\") \n\n\n# A tibble: 20 × 38\n   ADM1_EN    `Female_0-4` `Male_0-4` `Female_10-14` `Male_10-14` `Female_15-19`\n   &lt;chr&gt;             &lt;int&gt;      &lt;int&gt;          &lt;int&gt;        &lt;int&gt;          &lt;int&gt;\n 1 'Asir             86076      89700          89842        92719          80089\n 2 Al Bahah          13905      14292          15738        16437          13866\n 3 Al Hudud …        20196      21493          17737        18266          14648\n 4 Al Jawf           35470      36359          29566        30401          23021\n 5 Al Madinah           NA         NA             NA           NA             NA\n 6 Al Madina…        92536      95669          91346        94512          78252\n 7 Al Mintaq…       200425     208376         184743       191018         149977\n 8 Al Qasim          54714      56834          57093        58495          50842\n 9 Al Quassim           NA         NA             NA           NA             NA\n10 Ar Riyad             NA         NA             NA           NA             NA\n11 Ar Riyadh        307991     320698         298933       309250         254888\n12 Ash Sharq…           NA         NA             NA           NA             NA\n13 Ha'il             32737      33782          32674        33511          27449\n14 Jazan             64626      67613          64993        68873          59475\n15 Jizan                NA         NA             NA           NA             NA\n16 Makkah               NA         NA             NA           NA             NA\n17 Makkah al…       281082     292376         299840       314392         270382\n18 Najran            31863      33038          27125        28865          22482\n19 Tabuk             42296      44012          39399        40646          34513\n20 `Asir                NA         NA             NA           NA             NA\n# ℹ 32 more variables: `Male_15-19` &lt;int&gt;, `Female_20-24` &lt;int&gt;,\n#   `Male_20-24` &lt;int&gt;, `Female_25-29` &lt;int&gt;, `Male_25-29` &lt;int&gt;,\n#   `Female_30-34` &lt;int&gt;, `Male_30-34` &lt;int&gt;, `Female_35-39` &lt;int&gt;,\n#   `Male_35-39` &lt;int&gt;, `Female_40-44` &lt;int&gt;, `Male_40-44` &lt;int&gt;,\n#   `Female_45-49` &lt;int&gt;, `Male_45-49` &lt;int&gt;, `Female_5-9` &lt;int&gt;,\n#   `Male_5-9` &lt;int&gt;, `Female_50-54` &lt;int&gt;, `Male_50-54` &lt;int&gt;,\n#   `Female_55-59` &lt;int&gt;, `Male_55-59` &lt;int&gt;, `Female_60-64` &lt;int&gt;, …",
    "crumbs": [
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Data preparation and cleaning</span>"
    ]
  },
  {
    "objectID": "amr_poc.html",
    "href": "amr_poc.html",
    "title": "4  AMR walkthrough",
    "section": "",
    "text": "5 Introduction\nThis document outlines a stepwise approach to calculating AMR indicators from dummy data kindly supplied by PHA.\nThere are x steps",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>AMR walkthrough</span>"
    ]
  },
  {
    "objectID": "amr_poc.html#data-preparation",
    "href": "amr_poc.html#data-preparation",
    "title": "4  AMR walkthrough",
    "section": "6.1 Data preparation",
    "text": "6.1 Data preparation\n\n6.1.1 calculate 5-year age bands\n\n\nCode\namr &lt;- amr[, `:=` (five_year = cut(age_year, breaks = seq(0, 100, 5), right = FALSE))][]\n\nhead(amr)\n\n\n   record_number sample_no patient_mrn   location\n           &lt;num&gt;    &lt;char&gt;      &lt;char&gt;     &lt;char&gt;\n1:             1    ######       ##### Outpatient\n2:            17    ######       #####  Inpatient\n3:            20    ######       #####  Inpatient\n4:            25    ######       #####  Inpatient\n5:            43    ######       ##### Outpatient\n6:            63    ######       ##### Outpatient\n                                                     patient_hospitalized\n                                                                   &lt;char&gt;\n1: Patient had NOT been admitted for more than 2 days in the past 30 days\n2:                       Patient has been hospitalized for 2 days or less\n3:                     Patient has been hospitalized for more than 2 days\n4:                       Patient has been hospitalized for 2 days or less\n5: Patient had NOT been admitted for more than 2 days in the past 30 days\n6: Patient had NOT been admitted for more than 2 days in the past 30 days\n     specific_location age_year community_origin   site first_name second_name\n                &lt;char&gt;    &lt;num&gt;           &lt;char&gt; &lt;char&gt;     &lt;char&gt;      &lt;char&gt;\n1:      Emergency Room        0 Community Origin  Blood       ####       #####\n2: Intensive Care Unit       71 Community Origin  Blood       ####       #####\n3: Intensive Care Unit       44  Hospital Origin  Blood       ####       #####\n4: Intensive Care Unit       67 Community Origin  Blood       ####       #####\n5:      Emergency Room       67 Community Origin  Blood       ####       #####\n6:      Emergency Room       92 Community Origin  Blood       ####       #####\n   family_name national_iqama_id nationality    pathogen_name minocycline\n        &lt;char&gt;            &lt;char&gt;      &lt;char&gt;           &lt;char&gt;      &lt;lgcl&gt;\n1:        ####        ##########       ##### Escherichia coli          NA\n2:        ####        ##########       ##### Escherichia coli          NA\n3:        ####        ##########       ##### Escherichia coli          NA\n4:        ####        ##########       ##### Escherichia coli          NA\n5:        ####        ##########       ##### Escherichia coli          NA\n6:        ####        ##########       ##### Escherichia coli          NA\n   tigecycline ampicillin penicillin_g oxacillin cefoxitin cefotaxime\n        &lt;lgcl&gt;     &lt;char&gt;       &lt;lgcl&gt;    &lt;char&gt;    &lt;char&gt;     &lt;char&gt;\n1:          NA          R           NA      &lt;NA&gt;      &lt;NA&gt;          R\n2:          NA          R           NA      &lt;NA&gt;      &lt;NA&gt;         NA\n3:          NA          S           NA      &lt;NA&gt;      &lt;NA&gt;          S\n4:          NA          R           NA      &lt;NA&gt;      &lt;NA&gt;          R\n5:          NA          R           NA      &lt;NA&gt;      &lt;NA&gt;         NA\n6:          NA          R           NA      &lt;NA&gt;      &lt;NA&gt;         NA\n   ceftazidime ceftriaxone cefixime cefepime doripenem ertapenem imipenem\n        &lt;char&gt;      &lt;char&gt;   &lt;lgcl&gt;   &lt;char&gt;    &lt;char&gt;    &lt;char&gt;   &lt;char&gt;\n1:           R           R       NA        R        NA         S        S\n2:           S           S       NA        S        NA         S        S\n3:           S           S       NA        S        NA         S        S\n4:           R           R       NA        R        NA         S        S\n5:           I           S       NA        S        NA         S        S\n6:           R           R       NA        R         R         S        S\n   meropenem co_trimoxazole azithromycin amikacin gentamicin ciprofloxacin\n      &lt;char&gt;         &lt;char&gt;       &lt;lgcl&gt;   &lt;lgcl&gt;     &lt;lgcl&gt;        &lt;char&gt;\n1:         S              S           NA       NA         NA             S\n2:         S              S           NA       NA         NA             S\n3:         S              S           NA       NA         NA             S\n4:         S              R           NA       NA         NA             S\n5:         S              S           NA       NA         NA             S\n6:         S              R           NA       NA         NA             R\n   levofloxacin colistin spectinomycin five_year\n         &lt;char&gt;   &lt;char&gt;        &lt;lgcl&gt;    &lt;fctr&gt;\n1:            S       NA            NA     [0,5)\n2:            S        S            NA   [70,75)\n3:            S       NA            NA   [40,45)\n4:            S       NA            NA   [65,70)\n5:            S        S            NA   [65,70)\n6:            R        S            NA   [90,95)\n\n\n\n\n6.1.2 remove non-relevant data\nThis step removes identifiers (names, record IDs)\n\n\nCode\namr &lt;- amr |&gt; select(-c(family_name, first_name, sample_no, patient_mrn, second_name, national_iqama_id, nationality))\n\n\n\n\n6.1.3 create per test file (long data)\n\nthis create a per test dataset rather than a per patient sample dataset\n\n\n\nCode\namr_long &lt;- amr |&gt;\n    pivot_longer(names_to = \"antibiotic_test\", values_to = \"resistance\", cols = minocycline:spectinomycin) |&gt; setDT()\n\n\n\n\n6.1.4 recode 3rd generation cephalosporins\n\nthis step adds a new variable which labels 3rd generation cephalosporins\n\n\n\nCode\namr_long &lt;- amr_long[, gen_3 := case_when(str_detect(antibiotic_test, \"cef\") ~ \"3rd-gen\", TRUE ~ \"other\")][]",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>AMR walkthrough</span>"
    ]
  },
  {
    "objectID": "amr_poc.html#data-summarisation-and-description-eda",
    "href": "amr_poc.html#data-summarisation-and-description-eda",
    "title": "4  AMR walkthrough",
    "section": "6.2 Data summarisation and description (EDA)",
    "text": "6.2 Data summarisation and description (EDA)\n\nfirst generate a high level tabular summary\n\n\n\nCode\ngtsummary::tbl_summary(amr)\n\n\n\nrepresent this visually - we’ll use decompostion trees\n\n\n\nCode\namr_freq &lt;- amr_long[pathogen_name == \"Escherichia coli\", .N, by = .(five_year, gen_3, resistance, pathogen_name)]\n\ncollapsibleTreeSummary(amr_freq, \n                       c(\"gen_3\", \"resistance\"), \n                       root = \"E. coli\", \n                       nodeSize = \"N\", \n                       attribute = \"N\", \n                       fontSize = 16, \n                       collapsed = FALSE)",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>AMR walkthrough</span>"
    ]
  },
  {
    "objectID": "amr_poc.html#numerators-and-denominators",
    "href": "amr_poc.html#numerators-and-denominators",
    "title": "4  AMR walkthrough",
    "section": "6.3 Numerators and denominators",
    "text": "6.3 Numerators and denominators\n\nto calculate indicators we need to calculate\npatients with blood stream infection\nsamples with antibiotic resistance\n\n\n\nCode\namr_long\n\n\n      record_number   location\n              &lt;num&gt;     &lt;char&gt;\n   1:             1 Outpatient\n   2:             1 Outpatient\n   3:             1 Outpatient\n   4:             1 Outpatient\n   5:             1 Outpatient\n  ---                         \n7678:          1210  Inpatient\n7679:          1210  Inpatient\n7680:          1210  Inpatient\n7681:          1210  Inpatient\n7682:          1210  Inpatient\n                                                        patient_hospitalized\n                                                                      &lt;char&gt;\n   1: Patient had NOT been admitted for more than 2 days in the past 30 days\n   2: Patient had NOT been admitted for more than 2 days in the past 30 days\n   3: Patient had NOT been admitted for more than 2 days in the past 30 days\n   4: Patient had NOT been admitted for more than 2 days in the past 30 days\n   5: Patient had NOT been admitted for more than 2 days in the past 30 days\n  ---                                                                       \n7678:                     Patient has been hospitalized for more than 2 days\n7679:                     Patient has been hospitalized for more than 2 days\n7680:                     Patient has been hospitalized for more than 2 days\n7681:                     Patient has been hospitalized for more than 2 days\n7682:                     Patient has been hospitalized for more than 2 days\n       specific_location age_year community_origin   site         pathogen_name\n                  &lt;char&gt;    &lt;num&gt;           &lt;char&gt; &lt;char&gt;                &lt;char&gt;\n   1:     Emergency Room        0 Community Origin  Blood      Escherichia coli\n   2:     Emergency Room        0 Community Origin  Blood      Escherichia coli\n   3:     Emergency Room        0 Community Origin  Blood      Escherichia coli\n   4:     Emergency Room        0 Community Origin  Blood      Escherichia coli\n   5:     Emergency Room        0 Community Origin  Blood      Escherichia coli\n  ---                                                                          \n7678: Non Intensive Unit       96  Hospital Origin  Blood Staphylococcus aureus\n7679: Non Intensive Unit       96  Hospital Origin  Blood Staphylococcus aureus\n7680: Non Intensive Unit       96  Hospital Origin  Blood Staphylococcus aureus\n7681: Non Intensive Unit       96  Hospital Origin  Blood Staphylococcus aureus\n7682: Non Intensive Unit       96  Hospital Origin  Blood Staphylococcus aureus\n      five_year antibiotic_test resistance  gen_3\n         &lt;fctr&gt;          &lt;char&gt;     &lt;char&gt; &lt;char&gt;\n   1:     [0,5)     minocycline       &lt;NA&gt;  other\n   2:     [0,5)     tigecycline       &lt;NA&gt;  other\n   3:     [0,5)      ampicillin          R  other\n   4:     [0,5)    penicillin_g       &lt;NA&gt;  other\n   5:     [0,5)       oxacillin       &lt;NA&gt;  other\n  ---                                            \n7678:  [95,100)      gentamicin       &lt;NA&gt;  other\n7679:  [95,100)   ciprofloxacin          R  other\n7680:  [95,100)    levofloxacin          R  other\n7681:  [95,100)        colistin         NA  other\n7682:  [95,100)   spectinomycin       &lt;NA&gt;  other",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>AMR walkthrough</span>"
    ]
  },
  {
    "objectID": "amr_poc.html#calculate-resistance-rates",
    "href": "amr_poc.html#calculate-resistance-rates",
    "title": "4  AMR walkthrough",
    "section": "6.4 Calculate resistance rates",
    "text": "6.4 Calculate resistance rates\n\ncalculate proportion of tests resistant\ncalculate confidence interval (using Wilsons score method for proportions via the PHEindicatormethods R package)\n\n\n\nCode\namr_long[pathogen_name == \"Staphylococcus aureus\" & !is.na(resistance), .N, by = .(resistance)] |&gt;\n    pivot_wider(names_from = resistance, values_from = N) |&gt;\n    rowwise() |&gt;\n    mutate(total_tests = sum(c_across(S:I), na.rm = TRUE), \n           resistance_rate = R / total_tests)\n\n\n# A tibble: 1 × 6\n# Rowwise: \n      S  `NA`     R     I total_tests resistance_rate\n  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;       &lt;int&gt;           &lt;dbl&gt;\n1   947   281   545    11        1784           0.305\n\n\nby antibiotic\n\n\nCode\noptions(digits = 2)\n\namr_res_ci_sa &lt;- amr_long[pathogen_name == \"Staphylococcus aureus\" & !is.na(resistance), .N, by = .(antibiotic_test, resistance)] |&gt;\n    pivot_wider(names_from = resistance, values_from = N, values_fill = 0) |&gt;\n    rowwise() |&gt;\n    mutate(total_tests = sum(c_across(S:I), na.rm = TRUE), \n           resistance_rate = R / total_tests)\n\nphe_proportion(amr_res_ci_sa, R, total_tests) |&gt;\n    bind_cols(amr_res_ci_sa) |&gt;\n    ggplot() +\n    geom_point(aes(reorder(antibiotic_test, value), value)) +\n    geom_linerange(aes(antibiotic_test, ymin = lowercl, ymax = uppercl)) +\n    coord_flip() +\n    labs(y = \"Staph. aureus resistance rate\", x = \"\") + \n    scale_y_continuous(position = \"right\")\n\n\nNew names:\n• `R` -&gt; `R...1`\n• `total_tests` -&gt; `total_tests...2`\n• `R` -&gt; `R...12`\n• `total_tests` -&gt; `total_tests...14`\n\n\n\n\n\n\n\n\n\nby age\n\n\nCode\namr_res_ci_age &lt;- amr_long[pathogen_name == \"Staphylococcus aureus\" & !is.na(resistance), .N, by = .(five_year, resistance)] |&gt;\n    pivot_wider(names_from = resistance, values_from = N, values_fill = 0) |&gt;\n    rowwise() |&gt;\n    mutate(total_tests = sum(c_across(S:I), na.rm = TRUE), \n           resistance_rate = R / total_tests)\n\nphe_proportion(amr_res_ci_age, R, total_tests) |&gt;\n    bind_cols(amr_res_ci_age) |&gt;\n    ggplot() +\n    geom_point(aes(reorder(five_year, value), value)) +\n    geom_linerange(aes(five_year, ymin = lowercl, ymax = uppercl)) +\n    coord_flip() +\n    labs(y = \"Staph. aureus resistance rate\", x = \"\") + \n    scale_y_continuous(position = \"right\")\n\n\nNew names:\n• `R` -&gt; `R...1`\n• `total_tests` -&gt; `total_tests...2`\n• `R` -&gt; `R...12`\n• `total_tests` -&gt; `total_tests...14`",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>AMR walkthrough</span>"
    ]
  },
  {
    "objectID": "amr_poc.html#e.-coli-1",
    "href": "amr_poc.html#e.-coli-1",
    "title": "4  AMR walkthrough",
    "section": "6.5 E. coli",
    "text": "6.5 E. coli\n\n\nCode\namr_res_ci_ec &lt;- amr_long[str_detect(pathogen_name, \"coli\") & !is.na(resistance), .N, by = .(antibiotic_test, resistance, gen_3)] |&gt;\n    pivot_wider(names_from = resistance, values_from = N, values_fill = 0) |&gt;\n    rowwise() |&gt;\n    mutate(total_tests = sum(c_across(R:I), na.rm = TRUE), \n           resistance_rate = R / total_tests)\n\nphe_proportion(amr_res_ci_ec, R, total_tests) |&gt;\n    bind_cols(amr_res_ci_ec) |&gt;\n    ggplot() +\n    geom_point(aes(reorder(antibiotic_test, value), value, colour = gen_3)) +\n    geom_linerange(aes(antibiotic_test, ymin = lowercl, ymax = uppercl)) +\n    coord_flip() +\n    labs(y = \"E. coli resistance rate\", x = \"\") + scale_y_continuous(position = \"right\")\n\n\nNew names:\n• `R` -&gt; `R...1`\n• `total_tests` -&gt; `total_tests...2`\n• `R` -&gt; `R...11`\n• `total_tests` -&gt; `total_tests...15`\n\n\n\n\n\n\n\n\n\n\n6.5.0.1 select methicillin tested samples\n\n\nCode\namr[, .SD, .SDcols = c(\"record_number\", \"location\", \"patient_hospitalized\", \"specific_location\", \"community_origin\", \"site\", \"pathogen_name\", \"five_year\")]\n\n\n     record_number   location\n             &lt;num&gt;     &lt;char&gt;\n  1:             1 Outpatient\n  2:            17  Inpatient\n  3:            20  Inpatient\n  4:            25  Inpatient\n  5:            43 Outpatient\n ---                         \n330:          1218  Inpatient\n331:          1159 Outpatient\n332:          1183 Outpatient\n333:          1160 Outpatient\n334:          1210  Inpatient\n                                                       patient_hospitalized\n                                                                     &lt;char&gt;\n  1: Patient had NOT been admitted for more than 2 days in the past 30 days\n  2:                       Patient has been hospitalized for 2 days or less\n  3:                     Patient has been hospitalized for more than 2 days\n  4:                       Patient has been hospitalized for 2 days or less\n  5: Patient had NOT been admitted for more than 2 days in the past 30 days\n ---                                                                       \n330:                       Patient has been hospitalized for 2 days or less\n331: Patient had NOT been admitted for more than 2 days in the past 30 days\n332: Patient had NOT been admitted for more than 2 days in the past 30 days\n333: Patient had NOT been admitted for more than 2 days in the past 30 days\n334:                     Patient has been hospitalized for more than 2 days\n          specific_location community_origin   site         pathogen_name\n                     &lt;char&gt;           &lt;char&gt; &lt;char&gt;                &lt;char&gt;\n  1:         Emergency Room Community Origin  Blood      Escherichia coli\n  2:    Intensive Care Unit Community Origin  Blood      Escherichia coli\n  3:    Intensive Care Unit  Hospital Origin  Blood      Escherichia coli\n  4:    Intensive Care Unit Community Origin  Blood      Escherichia coli\n  5:         Emergency Room Community Origin  Blood      Escherichia coli\n ---                                                                     \n330:     Non Intensive Unit Community Origin  Blood      Escherichia coli\n331:         Emergency Room Community Origin  Blood Staphylococcus aureus\n332: Out Patient Department Community Origin  Blood Staphylococcus aureus\n333:         Emergency Room Community Origin  Blood      Escherichia coli\n334:     Non Intensive Unit  Hospital Origin  Blood Staphylococcus aureus\n     five_year\n        &lt;fctr&gt;\n  1:     [0,5)\n  2:   [70,75)\n  3:   [40,45)\n  4:   [65,70)\n  5:   [65,70)\n ---          \n330:   [80,85)\n331:   [85,90)\n332:   [85,90)\n333:   [90,95)\n334:  [95,100)",
    "crumbs": [
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>AMR walkthrough</span>"
    ]
  },
  {
    "objectID": "smoking-poc.html",
    "href": "smoking-poc.html",
    "title": "5  smoking-poc",
    "section": "",
    "text": "5.1",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>smoking-poc</span>"
    ]
  },
  {
    "objectID": "smoking-poc.html#section",
    "href": "smoking-poc.html#section",
    "title": "5  smoking-poc",
    "section": "",
    "text": "5.1.1 Data preparation\n\n\nCode\nsmoking &lt;- smoking[, `:=` (five_year = cut(age, breaks = seq(0, 100, 5), right = FALSE), `18-44` = between(age, 18, 44), `15+` = age &gt;= 15)][]\n\n\n\n\n5.1.2 Calculate numerator and denominator\n\n\nCode\nsmoking[patient_gender == \"female\" & `18-44` == TRUE, .N, by = .(directorate_name, year)]\n\n\n    directorate_name  year     N\n              &lt;char&gt; &lt;int&gt; &lt;int&gt;\n 1:             Asir  2022     9\n 2:            Jazan  2022   145\n 3:             Jouf  2022    23\n 4:           Najran  2022    82\n 5:           Qassim  2022    22\n 6:          Eastern  2022   551\n 7:           AlAhsa  2022    73\n 8:            Tabuk  2022   291\n 9: Northern Borders  2022     4\n10:          Madinah  2022   205\n11:           Riyadh  2022  1830\n12:           Jeddah  2022  1569\n13:             Baha  2022    28\n14:             Taif  2022   100\n15:           Makkah  2022   578\n16:         Qunfotha  2022    13\n17:            Bisha  2022     6\n18:             Hail  2022    22\n19:    Hafer AlBatin  2022    60\n\n\nCode\n## probably better - easier to calculate / matching age bands/ more statitsical power NB crude rates\n\nsmoking[patient_gender == \"female\" & `15+` == TRUE, .N, by = .(directorate_name, year)]\n\n\n    directorate_name  year     N\n              &lt;char&gt; &lt;int&gt; &lt;int&gt;\n 1:             Asir  2022    84\n 2:            Jazan  2022   158\n 3:             Jouf  2022    28\n 4:           Najran  2022    85\n 5:           Qassim  2022    48\n 6:          Eastern  2022   579\n 7:           AlAhsa  2022    93\n 8:            Tabuk  2022   436\n 9: Northern Borders  2022     7\n10:          Madinah  2022   303\n11:           Riyadh  2022  1862\n12:           Jeddah  2022  1788\n13:             Baha  2022    28\n14:             Taif  2022   136\n15:           Makkah  2022   636\n16:         Qunfotha  2022    13\n17:            Bisha  2022     6\n18:             Hail  2022    22\n19:    Hafer AlBatin  2022    60\n20:         Qurayyat  2022     4\n    directorate_name  year     N\n\n\nCode\n## denominator\n\n\n\n\n5.1.3 Choropleth map\n\n\nCode\nsa_shp &lt;- curl_download(\"https://data.humdata.org/dataset/41ce9023-1d21-4549-a485-94316200aba0/resource/a0188b1b-2f40-4f27-8a43-25913a7378ca/download/sau_adm_gadm_20210525_shp.zip\", destfile = tempfile())\n\ntmpd &lt;- tempdir()\n\nsa_shp_1 &lt;- curl_download(\"https://data.humdata.org/dataset/41ce9023-1d21-4549-a485-94316200aba0/resource/99834c81-ad34-415e-91c5-af053d8e55b4/download/sau_capp_adm1_1m_ocha.zip\", destfile = tempfile())\n\n#sa_pop_d &lt;- curl_download(\"https://data.humdata.org/dataset/14b288ca-1855-4025-9f01-41cba548e6f6/resource/44baa2f6-b6d8-4018-b9c6-fd81b493ec22/download/sau_general_2020_geotiff.zip\", destfile = tempfile())\n\nsa_shp &lt;- unzip(sa_shp_l, exdir = tmpd)\n\nsa_shp_1 &lt;- unzip(sa_shp_1, exdir = tmpd)\n\nsa_tif &lt;- unzip(sa_pop_d, exdir = tmpd)\n\nshps &lt;- fs::dir_ls(tmpd, regexp = \"shp\")\n\nsa_bound &lt;- read_sf(shps[4]) \n\nsa_bound |&gt;\n    ggplot() +\n    geom_sf(aes(fill = ADM1_EN)) +\n    geom_sf(data = read_sf(shps[12])) +\n    geom_sf_label(data = read_sf(shps[12]), aes(label = NAME), colour = \"blue\", size = 3, nudge_y = .5) +\n    theme_void() +\n    scale_fill_viridis_d(option = \"rocket\")\n\nsmoking$directorate_name |&gt;\n    unique()\n\nsa_bound$ADM1_EN\n\n\n# source(\"/Users/julianflowers/Library/CloudStorage/GoogleDrive-julian.flowers12@gmail.com/My Drive/Saudi/pop-den.R\")",
    "crumbs": [
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>smoking-poc</span>"
    ]
  },
  {
    "objectID": "flu.html",
    "href": "flu.html",
    "title": "6  flu",
    "section": "",
    "text": "6.1 Check\nCode\nwhich(is.na(flu_agg[, .(N, sum_pop),  by = .(age_band, Gender, region)])) ## no NAs\n\n\ninteger(0)\n\n\nCode\nsummary(flu_agg)\n\n\n    Gender             region            age_band               N         \n Length:442         Length:442         Length:442         Min.   :  0.00  \n Class :character   Class :character   Class :character   1st Qu.:  0.00  \n Mode  :character   Mode  :character   Mode  :character   Median :  3.00  \n                                                          Mean   : 19.09  \n                                                          3rd Qu.: 18.00  \n                                                          Max.   :253.00  \n    sum_pop      \n Min.   :   696  \n 1st Qu.:  9340  \n Median : 27800  \n Mean   : 72795  \n 3rd Qu.: 73094  \n Max.   :776167",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>flu</span>"
    ]
  },
  {
    "objectID": "flu.html#calculate-rates",
    "href": "flu.html#calculate-rates",
    "title": "6  flu",
    "section": "6.2 Calculate rates",
    "text": "6.2 Calculate rates\n\n\nCode\nflu_agg[, rate := 100000 * N/sum_pop][]\n\n\n     Gender region age_band     N sum_pop       rate\n     &lt;char&gt; &lt;char&gt;   &lt;char&gt; &lt;num&gt;   &lt;int&gt;      &lt;num&gt;\n  1: Female  'Asir      0-4    25   86076  29.044101\n  2: Female  'Asir    10-14     4   89842   4.452261\n  3: Female  'Asir    15-19    19   80089  23.723607\n  4: Female  'Asir    20-24    87   70589 123.248665\n  5: Female  'Asir    25-29    75   72715 103.142405\n ---                                                \n438:   Male  Tabuk    60-64    14    8327 168.127777\n439:   Male  Tabuk    65-69     1    4546  21.997360\n440:   Male  Tabuk    70-74     0    2469   0.000000\n441:   Male  Tabuk    75-79     0    1467   0.000000\n442:   Male  Tabuk      80+     1    1767  56.593096\n\n\nCode\n## works!",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>flu</span>"
    ]
  },
  {
    "objectID": "flu.html#compare-regions",
    "href": "flu.html#compare-regions",
    "title": "6  flu",
    "section": "6.3 Compare regions",
    "text": "6.3 Compare regions\nUsing KSA population as standard rate\nTo do this will use the phe_dsr function from the PHEindicatormethods package from CRAN (see DSR vignette)\n\n\nCode\n## first load PHEindicatormethods and epitools\n\nneeds(PHEindicatormethods, epitools)\n\n## calculate gender, age-specific populations for KSA\n## \n\nksa_pop &lt;- pops[, ref_pop := sum(Population), by = .(Gender, `Five-Year Age Group`)][, .(`Five-Year Age Group`, Gender, ref_pop)] |&gt;\n    distinct() |&gt;\n    rename(age_band = `Five-Year Age Group`)\n\nksa_pop_f &lt;- filter(ksa_pop, Gender == \"Female\") |&gt; select(-Gender)\n\n##",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>flu</span>"
    ]
  },
  {
    "objectID": "flu.html#calculate-coverage",
    "href": "flu.html#calculate-coverage",
    "title": "6  flu",
    "section": "6.4 Calculate coverage",
    "text": "6.4 Calculate coverage\n\n\nCode\nflu_rate &lt;- setDT(flu_agg)[, `:=` (tot_obs = sum(N, na.rm = TRUE), tot_pop = sum(sum_pop, na.rm = TRUE)), by = .(region, Gender)][,.(region, Gender, tot_obs, tot_pop)] |&gt;\n    distinct()\n\nflu_coverage &lt;- phe_proportion(flu_rate, x = tot_obs, n = tot_pop)",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>flu</span>"
    ]
  },
  {
    "objectID": "flu.html#visualise",
    "href": "flu.html#visualise",
    "title": "6  flu",
    "section": "6.5 Visualise",
    "text": "6.5 Visualise\n\n\nCode\nflu_coverage |&gt;\n    ggplot() +\n    geom_col(aes(region, value, fill = Gender), position = position_dodge(width = 1)) +\n    geom_linerange(aes(region, ymin = lowercl, ymax = uppercl, group = Gender), position = position_dodge(width = 1)) +\n    labs(title = \"Flu vaccination coverage\", \n         y = \"Coverage (%)\", \n         x = \"\") +\n    ggthemes::theme_base() +\n    theme(plot.title.position = \"plot\", \n          axis.text.x = element_text(angle = 45, hjust = 1, )) +\n    scale_y_continuous(label = scales::percent) +\n    scale_fill_discrete(type = c(\"red\", \"blue\"))",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>flu</span>"
    ]
  },
  {
    "objectID": "flu.html#age-standarised-coverage",
    "href": "flu.html#age-standarised-coverage",
    "title": "6  flu",
    "section": "6.6 Age-standarised coverage",
    "text": "6.6 Age-standarised coverage\nNote\n\n\nCode\nflu_agg_std &lt;- flu_agg |&gt;\n    left_join(ksa_pop, by = c(\"age_band\", \"Gender\"))\n\n## which region - gender combinations have data for 17 age bands?\n## \n## \n\nksa_pop_f\n\n\n    age_band ref_pop\n      &lt;char&gt;   &lt;int&gt;\n 1:      0-4 1263917\n 2:      5-9 1354766\n 3:    10-14 1249029\n 4:    15-19 1079884\n 5:    20-24 1050547\n 6:    25-29 1242388\n 7:    30-34 1250860\n 8:    35-39 1113283\n 9:    40-44  839031\n10:    45-49  592256\n11:    50-54  463843\n12:    55-59  351281\n13:    60-64  253046\n14:    65-69  156115\n15:    70-74   94864\n16:    75-79   64100\n17:      80+   77419\n\n\nCode\ngp &lt;- flu_agg_std |&gt;\n    mutate(age_band = fct_relevel(as.factor(age_band), \"5-9\", after = 1)) |&gt;\n    arrange(age_band)\n\ngp_nest &lt;- gp |&gt;\n    nest_by(region, Gender)\n    \nflu_dsrs &lt;- gp_nest |&gt;\n    mutate(ds_rates = list(epitools::ageadjust.direct(count = data$N, pop = data$sum_pop, stdpop = data$ref_pop))) |&gt;\n    unnest_wider(ds_rates) |&gt;\n    select(-data) \n\n\nflu_dsrs |&gt;\n    ggplot() +\n    geom_col(aes(region, adj.rate, fill = Gender), position = position_dodge(width = 1)) +\n    geom_linerange(aes(region, ymin = lci, ymax = uci, group = Gender), position = position_dodge(width = 1)) +\n    labs(title = \"Standardised flu vaccination coverage\", \n         y = \"Coverage (%)\", \n         x = \"\") +\n    theme(plot.title.position = \"plot\", \n          axis.text.x = element_text(angle = 45, hjust = 1), \n          panel.background = element_blank()) +\n    scale_fill_discrete(type = c(\"red\", \"blue\")) +\n    scale_y_continuous(label = scales::percent)",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>flu</span>"
    ]
  },
  {
    "objectID": "injury.html",
    "href": "injury.html",
    "title": "7  Injury",
    "section": "",
    "text": "7.1 Injury\nCode\noptions(digits = 2)\nsummary(injury)\n\n\n  DateOfBirth                          code            diagnosis        \n Min.   :1939-08-16 00:00:00.000   Length:10380       Length:10380      \n 1st Qu.:1970-10-10 00:00:00.000   Class :character   Class :character  \n Median :1985-11-10 00:00:00.000   Mode  :character   Mode  :character  \n Mean   :1984-01-01 12:27:30.296                                        \n 3rd Qu.:1996-07-05 00:00:00.000                                        \n Max.   :2022-01-30 00:00:00.000                                        \n NA's   :773                                                            \n    Gender             Region         \n Length:10380       Length:10380      \n Class :character   Class :character  \n Mode  :character   Mode  :character  \n                                      \n                                      \n                                      \n                                      \n\n\nCode\nobs &lt;- nrow(injury)\nna_dob &lt;- injury[is.na(DateOfBirth), ]\nna_dob_n &lt;- nrow(na_dob)\nOverall there are 10380 records, of which 773 (7.45% ) have missing dates of of birth.\nCode\ninjury[, .N, by = .(diagnosis, code, Gender, Region )]\n\n\n                                                                                        diagnosis\n                                                                                           &lt;char&gt;\n 1:                                                             Crushing injury of ankle and foot\n 2:                                                                             Fracture of femur\n 3:                                                                 Superficial injury of forearm\n 4:                Dislocation, sprain and strain of joints and ligaments at ankle and foot level\n 5:                                                                           Intracranial injury\n 6:                                                                           Fracture of forearm\n 7:                                                                           Fracture of forearm\n 8:                               Certain early complications of trauma, not elsewhere classified\n 9:                                                             Injury of unspecified body region\n10:                                                                              Fracture of neck\n11:                                                            Fracture of skull and facial bones\n12:                                                                          Open wound of thorax\n13:                                                          Open wound of shoulder and upper arm\n14:                                                                             Fracture of femur\n15:                                                                           Fracture of forearm\n16:                                                                             Fracture of femur\n17:                               Certain early complications of trauma, not elsewhere classified\n18:                                                Fracture of rib(s), sternum and thoracic spine\n19:                                                                             Fracture of femur\n20:                                                                  Burn body region unspecified\n21:                                                        Fracture of lower leg, including ankle\n22:                                                                Fracture of foot, except ankle\n23:                                                 Toxic effect of contact with venomous animals\n24:                                                        Other and unspecified injuries of neck\n25:                                                        Fracture of lower leg, including ankle\n26:                          Dislocation, sprain and strain of joints and ligaments at neck level\n27:                                 Burns classified according to extent of body surface involved\n28:                                                       Other specified complications of trauma\n29:                                                        Fracture of lower leg, including ankle\n30:                                        Burn of shoulder and upper limb, except wrist and hand\n31:                                                            Fracture of skull and facial bones\n32:                                        Burn of shoulder and upper limb, except wrist and hand\n33:                                                                            Open wound of head\n34: Poisoning by diuretics and other and unspecified drugs, medicaments and biological substances\n35:                                                        Fracture of lower leg, including ankle\n36:                                                                  Sequelae of injuries of head\n37: Poisoning by diuretics and other and unspecified drugs, medicaments and biological substances\n38:                                                                        Burn of wrist and hand\n39:                                                            Fracture of shoulder and upper arm\n40:                                 Burns classified according to extent of body surface involved\n41:                                                            Fracture of skull and facial bones\n42:                                                          Superficial injury of wrist and hand\n43:                                                            Fracture of shoulder and upper arm\n44:                                                                  Burn body region unspecified\n45:                                           Injury of muscle and tendon at wrist and hand level\n46:                                                                           Intracranial injury\n47:                                                              Foreign body in alimentary tract\n48:                                                       Other specified complications of trauma\n49:                                                        Fracture of lower leg, including ankle\n50:                                         Complications of procedures, not elsewhere classified\n51:                                                            Fracture of shoulder and upper arm\n52:                                                                           Intracranial injury\n53:                                                             Crushing injury of ankle and foot\n54:                                                                             Fracture of femur\n55:                                                          Fracture of spine, level unspecified\n56:                Dislocation, sprain and strain of joints and ligaments at ankle and foot level\n57:                                                           Fracture of lumbar spine and pelvis\n58:                Dislocation, sprain and strain of joints and ligaments at wrist and hand level\n59:                                          Injury of other and unspecified intrathoracic organs\n60:                                                                  Burn body region unspecified\n61:                                                           Superficial injury of hip and thigh\n62:                                             Crushing injuries involving multiple body regions\n63:                                 Burns classified according to extent of body surface involved\n64:                                                                            Open wound of head\n65:                      Other injuries involving multiple body regions, not elsewhere classified\n66:                                                                           Fracture of forearm\n67:                                                                           Intracranial injury\n68:                                                                         Burn of head and neck\n69:                                                             Crushing injury of wrist and hand\n70:                                                 Toxic effect of contact with venomous animals\n71:                                                        Other and unspecified injuries of neck\n72:                                                       Other specified complications of trauma\n73:                                                                            Open wound of head\n74: Poisoning by diuretics and other and unspecified drugs, medicaments and biological substances\n75:                                                                        Burn of wrist and hand\n76:                                                            Fracture of skull and facial bones\n77:                                                        Fracture of lower leg, including ankle\n78:                                                          Fracture of spine, level unspecified\n79:                                                Fracture of rib(s), sternum and thoracic spine\n80:                                                            Fracture of skull and facial bones\n81:                                                                           Intracranial injury\n82:                                                           Fracture of lumbar spine and pelvis\n83:                               Certain early complications of trauma, not elsewhere classified\n                                                                                        diagnosis\n      code Gender            Region     N\n    &lt;char&gt; &lt;char&gt;            &lt;char&gt; &lt;int&gt;\n 1:    S97   Male            Makkah   140\n 2:    S72 Female            Makkah   240\n 3:    S50   Male            Makkah   300\n 4:    S93   Male            Riyadh   160\n 5:    S06   Male            Makkah   400\n 6:    S52   Male           Madinah   258\n 7:    S52 Female            Makkah   360\n 8:    T79   Male            Makkah   160\n 9:    T14   Male           Madinah   160\n10:    S12   Male            Riyadh   160\n11:    S02   Male            Riyadh   160\n12:    S21   Male            Riyadh   160\n13:    S41   Male            Riyadh   160\n14:    S72   Male           Madinah   225\n15:    S52   Male            Makkah   180\n16:    S72   Male            Makkah   180\n17:    T79   Male           Madinah    59\n18:    S22   Male           Madinah    66\n19:    S72 Female            Riyadh   600\n20:    T30   Male           Madinah   500\n21:    S82   Male           Madinah   167\n22:    S92   Male            Makkah   160\n23:    T63   Male           Madinah    58\n24:    S19   Male           Madinah    58\n25:    S82   Male            Makkah   160\n26:    S13   Male            Riyadh   280\n27:    T31   Male            Riyadh   280\n28:    T89   Male            Riyadh   100\n29:    S82 Female            Riyadh   280\n30:    T22   Male            Riyadh   280\n31:    S02   Male            Makkah   187\n32:    T22   Male            Makkah   160\n33:    S01   Male Northern Frontier    58\n34:    T50   Male Northern Frontier    57\n35:    S82   Male          Sharqiya   160\n36:    T90 Female            Makkah   160\n37:    T50 Female           Madinah   160\n38:    T23   Male           Madinah    58\n39:    S42   Male            Najran   160\n40:    T31   Male            Makkah   160\n41:    S02   Male           Al Baha    58\n42:    S60 Female           Al Jawf   160\n43:    S42 Female         Al Qassim   160\n44:    T30 Female              Asir   160\n45:    S66   Male              Hail   160\n46:    S06   Male             Jazan   140\n47:    T18   Male           Madinah    20\n48:    T89   Male            Makkah    20\n49:    S82 Female            Makkah    60\n50:    T81   Male           Madinah    20\n51:    S42 Female            Makkah    20\n52:    S06 Female            Makkah    20\n53:    S97   Male           Madinah    20\n54:    S72 Female           Madinah   135\n55:    T08   Male           Madinah     7\n56:    S93   Male            Makkah    20\n57:    S32   Male            Makkah    27\n58:    S63 Female            Makkah    20\n59:    S27   Male            Makkah    20\n60:    T30   Male            Makkah    20\n61:    S70   Male            Makkah    20\n62:    T04   Male            Makkah    20\n63:    T31   Male           Madinah    20\n64:    S01   Male            Makkah    20\n65:    T06   Male            Makkah    20\n66:    S52 Female           Madinah   122\n67:    S06   Male           Madinah     7\n68:    T20   Male            Makkah    20\n69:    S67   Male            Makkah    20\n70:    T63 Female           Madinah   102\n71:    S19 Female           Madinah   102\n72:    T89 Female            Riyadh   180\n73:    S01 Female Northern Frontier   102\n74:    T50 Female Northern Frontier   103\n75:    T23 Female           Madinah   102\n76:    S02 Female           Al Baha   102\n77:    S82 Female           Madinah    13\n78:    T08 Female           Madinah    13\n79:    S22 Female           Madinah   114\n80:    S02 Female            Makkah    13\n81:    S06 Female           Madinah    13\n82:    S32 Female            Makkah    13\n83:    T79 Female           Madinah   101\n      code Gender            Region     N\nCode\nunique(injury$Region)\n\n\n [1] \"Makkah\"            \"Riyadh\"            \"Madinah\"          \n [4] \"Northern Frontier\" \"Sharqiya\"          \"Najran\"           \n [7] \"Al Baha\"           \"Al Jawf\"           \"Al Qassim\"        \n[10] \"Asir\"              \"Hail\"              \"Jazan\"\nThe data contains values for 12 of the 13 regions.\nCode\n## exclude missing DoB\ninjury_dob &lt;-  injury[!is.na(DateOfBirth),]\n\ninjury_dob &lt;- injury_dob[!is.na(DateOfBirth), age := .(as.POSIXct(ymd(\"2023-06-01\")) - DateOfBirth)][, age_year := floor(as.numeric(age) / 365)][, age_band := cut(age_year, seq(0, 120, 5))][]",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Injury</span>"
    ]
  },
  {
    "objectID": "injury.html#aggregate-injury-data",
    "href": "injury.html#aggregate-injury-data",
    "title": "7  Injury",
    "section": "7.2 Aggregate injury data",
    "text": "7.2 Aggregate injury data\n\n\nCode\ninjury_dob[, .N, by = .(Region, diagnosis, code, age_band, Gender)][order(Region)] |&gt;\n    pivot_wider(names_from = Region, values_from = N) |&gt;\n    arrange(age_band, code, Gender) |&gt;\n    flextable::flextable()\n\n\ndiagnosiscodeage_bandGenderAl BahaAl JawfAl QassimAsirHailJazanMadinahMakkahNajranNorthern FrontierRiyadhSharqiyaCrushing injury of wrist and handS67(0,5]Male20Burn body region unspecifiedT30(0,5]Female160Burn body region unspecifiedT30(0,5]Male32020Fracture of skull and facial bonesS02(10,15]Male20160Fracture of forearmS52(10,15]Male199Superficial injury of wrist and handS60(10,15]Female160Fracture of femurS72(10,15]Female9Fracture of lower leg, including ankleS82(10,15]Male160Crushing injury of ankle and footS97(10,15]Male20Fracture of spine, level unspecifiedT08(10,15]Female1Burn of wrist and handT23(10,15]Female8Burn body region unspecifiedT30(10,15]Male160Other specified complications of traumaT89(10,15]Female8Fracture of rib(s), sternum and thoracic spineS22(15,20]Female1Crushing injuries involving multiple body regionsT04(15,20]Male19Open wound of headS01(20,25]Female17Fracture of skull and facial bonesS02(20,25]Female191Intracranial injuryS06(20,25]Female1Other and unspecified injuries of neckS19(20,25]Female18Fracture of rib(s), sternum and thoracic spineS22(20,25]Female19Fracture of lumbar spine and pelvisS32(20,25]Female1Fracture of forearmS52(20,25]Female38Fracture of forearmS52(20,25]Male1Fracture of femurS72(20,25]Female19Fracture of lower leg, including ankleS82(20,25]Female220Crushing injuries involving multiple body regionsT04(20,25]Male1Fracture of spine, level unspecifiedT08(20,25]Female1Injury of unspecified body regionT14(20,25]Male160Foreign body in alimentary tractT18(20,25]Male20Burn of wrist and handT23(20,25]Female19Burns classified according to extent of body surface involvedT31(20,25]Male280Poisoning by diuretics and other and unspecified drugs, medicaments and biological substancesT50(20,25]Female16018Toxic effect of contact with venomous animalsT63(20,25]Female19Certain early complications of trauma, not elsewhere classifiedT79(20,25]Female18Other specified complications of traumaT89(20,25]Female32Other specified complications of traumaT89(20,25]Male20Open wound of headS01(25,30]Female13Open wound of headS01(25,30]Male20Fracture of skull and facial bonesS02(25,30]Female122Intracranial injuryS06(25,30]Female2Intracranial injuryS06(25,30]Male160Fracture of neckS12(25,30]Male160Other and unspecified injuries of neckS19(25,30]Female12Open wound of thoraxS21(25,30]Male160Fracture of rib(s), sternum and thoracic spineS22(25,30]Female14Fracture of lumbar spine and pelvisS32(25,30]Female2Fracture of shoulder and upper armS42(25,30]Male160Superficial injury of forearmS50(25,30]Male160Fracture of forearmS52(25,30]Female12Fracture of femurS72(25,30]Female6Fracture of lower leg, including ankleS82(25,30]Female2Fracture of lower leg, including ankleS82(25,30]Male160Fracture of spine, level unspecifiedT08(25,30]Female2Burn of head and neckT20(25,30]Male20Burn of wrist and handT23(25,30]Female4Poisoning by diuretics and other and unspecified drugs, medicaments and biological substancesT50(25,30]Female12Toxic effect of contact with venomous animalsT63(25,30]Female12Certain early complications of trauma, not elsewhere classifiedT79(25,30]Female12Other specified complications of traumaT89(25,30]Female14Open wound of headS01(30,35]Female11Open wound of headS01(30,35]Male8Fracture of skull and facial bonesS02(30,35]Female181Fracture of skull and facial bonesS02(30,35]Male101Intracranial injuryS06(30,35]Female1Intracranial injuryS06(30,35]Male117Other and unspecified injuries of neckS19(30,35]Female11Other and unspecified injuries of neckS19(30,35]Male8Fracture of rib(s), sternum and thoracic spineS22(30,35]Female13Fracture of rib(s), sternum and thoracic spineS22(30,35]Male9Fracture of lumbar spine and pelvisS32(30,35]Female1Fracture of lumbar spine and pelvisS32(30,35]Male1Open wound of shoulder and upper armS41(30,35]Male160Superficial injury of forearmS50(30,35]Male140Fracture of forearmS52(30,35]Female11Fracture of forearmS52(30,35]Male8Fracture of femurS72(30,35]Female12Fracture of femurS72(30,35]Male9Fracture of lower leg, including ankleS82(30,35]Female2Fracture of lower leg, including ankleS82(30,35]Male1Fracture of foot, except ankleS92(30,35]Male2Fracture of spine, level unspecifiedT08(30,35]Female2Fracture of spine, level unspecifiedT08(30,35]Male1Burn of shoulder and upper limb, except wrist and handT22(30,35]Male280Burn of wrist and handT23(30,35]Female10Burn of wrist and handT23(30,35]Male9Burns classified according to extent of body surface involvedT31(30,35]Male2160Poisoning by diuretics and other and unspecified drugs, medicaments and biological substancesT50(30,35]Female11Poisoning by diuretics and other and unspecified drugs, medicaments and biological substancesT50(30,35]Male8Toxic effect of contact with venomous animalsT63(30,35]Female11Toxic effect of contact with venomous animalsT63(30,35]Male8Certain early complications of trauma, not elsewhere classifiedT79(30,35]Female11Certain early complications of trauma, not elsewhere classifiedT79(30,35]Male8Other specified complications of traumaT89(30,35]Female26Other specified complications of traumaT89(30,35]Male14Intracranial injuryS06(35,40]Male140Dislocation, sprain and strain of joints and ligaments at neck levelS13(35,40]Male280Fracture of lumbar spine and pelvisS32(35,40]Female4Fracture of lumbar spine and pelvisS32(35,40]Male21Fracture of forearmS52(35,40]Male180Injury of muscle and tendon at wrist and hand levelS66(35,40]Male160Fracture of femurS72(35,40]Male19Fracture of lower leg, including ankleS82(35,40]Female20Burn of shoulder and upper limb, except wrist and handT22(35,40]Male160Open wound of headS01(40,45]Female8Open wound of headS01(40,45]Male2Fracture of skull and facial bonesS02(40,45]Female15Fracture of skull and facial bonesS02(40,45]Male21Intracranial injuryS06(40,45]Female5Intracranial injuryS06(40,45]Male1142Other and unspecified injuries of neckS19(40,45]Female8Other and unspecified injuries of neckS19(40,45]Male1Fracture of rib(s), sternum and thoracic spineS22(40,45]Female41Fracture of rib(s), sternum and thoracic spineS22(40,45]Male11Fracture of lumbar spine and pelvisS32(40,45]Female1Fracture of forearmS52(40,45]Female39Fracture of forearmS52(40,45]Male9Dislocation, sprain and strain of joints and ligaments at wrist and hand levelS63(40,45]Female19Superficial injury of hip and thighS70(40,45]Male19Fracture of femurS72(40,45]Female11Fracture of femurS72(40,45]Male4Fracture of lower leg, including ankleS82(40,45]Male1Crushing injury of ankle and footS97(40,45]Male139Fracture of spine, level unspecifiedT08(40,45]Female3Fracture of spine, level unspecifiedT08(40,45]Male1Burn of wrist and handT23(40,45]Female8Burn of wrist and handT23(40,45]Male3Burn body region unspecifiedT30(40,45]Male19Burns classified according to extent of body surface involvedT31(40,45]Male17Poisoning by diuretics and other and unspecified drugs, medicaments and biological substancesT50(40,45]Female8Poisoning by diuretics and other and unspecified drugs, medicaments and biological substancesT50(40,45]Male3Toxic effect of contact with venomous animalsT63(40,45]Female7Toxic effect of contact with venomous animalsT63(40,45]Male1Certain early complications of trauma, not elsewhere classifiedT79(40,45]Female38Certain early complications of trauma, not elsewhere classifiedT79(40,45]Male10Other specified complications of traumaT89(40,45]Female8Other specified complications of traumaT89(40,45]Male1Open wound of headS01(45,50]Female33Open wound of headS01(45,50]Male7Fracture of skull and facial bonesS02(45,50]Female331Fracture of skull and facial bonesS02(45,50]Male6Intracranial injuryS06(45,50]Female1Intracranial injuryS06(45,50]Male41Other and unspecified injuries of neckS19(45,50]Female33Other and unspecified injuries of neckS19(45,50]Male8Fracture of rib(s), sternum and thoracic spineS22(45,50]Female2Fracture of lumbar spine and pelvisS32(45,50]Female1Fracture of shoulder and upper armS42(45,50]Female160Fracture of forearmS52(45,50]Female1Dislocation, sprain and strain of joints and ligaments at wrist and hand levelS63(45,50]Female1Superficial injury of hip and thighS70(45,50]Male1Fracture of femurS72(45,50]Female34Fracture of femurS72(45,50]Male61Fracture of lower leg, including ankleS82(45,50]Female4Fracture of lower leg, including ankleS82(45,50]Male160Fracture of foot, except ankleS92(45,50]Male158Dislocation, sprain and strain of joints and ligaments at ankle and foot levelS93(45,50]Male20Crushing injury of ankle and footS97(45,50]Male1Fracture of spine, level unspecifiedT08(45,50]Female1Burn of wrist and handT23(45,50]Female33Burn of wrist and handT23(45,50]Male6Burn body region unspecifiedT30(45,50]Male1Burns classified according to extent of body surface involvedT31(45,50]Male1Poisoning by diuretics and other and unspecified drugs, medicaments and biological substancesT50(45,50]Female33Poisoning by diuretics and other and unspecified drugs, medicaments and biological substancesT50(45,50]Male6Toxic effect of contact with venomous animalsT63(45,50]Female33Toxic effect of contact with venomous animalsT63(45,50]Male8Certain early complications of trauma, not elsewhere classifiedT79(45,50]Female1Other specified complications of traumaT89(45,50]Female57Other specified complications of traumaT89(45,50]Male14Fracture of forearmS52(50,55]Female20Fracture of femurS72(50,55]Female40320Fracture of lower leg, including ankleS82(50,55]Female280Other injuries involving multiple body regions, not elsewhere classifiedT06(50,55]Male20Complications of procedures, not elsewhere classifiedT81(50,55]Male20Sequelae of injuries of headT90(50,55]Female160Certain early complications of trauma, not elsewhere classifiedT79(55,60]Male160Intracranial injuryS06(60,65]Female20Intracranial injuryS06(60,65]Male40Fracture of forearmS52(60,65]Female20Fracture of femurS72(60,65]Female20280Fracture of femurS72(60,65]Male160Fracture of lower leg, including ankleS82(60,65]Female20Dislocation, sprain and strain of joints and ligaments at ankle and foot levelS93(60,65]Male160Fracture of skull and facial bonesS02(65,70]Male160Fracture of femurS72(65,70]Female20Injury of other and unspecified intrathoracic organsS27(70,75]Male20Fracture of femurS72(70,75]Female160Fracture of shoulder and upper armS42(75,80]Female20Fracture of femurS72(75,80]Female20Fracture of femurS72(75,80]Male160Fracture of forearmS52(80,85]Female320",
    "crumbs": [
      "<span class='chapter-number'>7</span>  <span class='chapter-title'>Injury</span>"
    ]
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "8  Summary",
    "section": "",
    "text": "In summary, this book has no content whatsoever.\n\n\nCode\n1 + 1\n\n\n[1] 2",
    "crumbs": [
      "<span class='chapter-number'>8</span>  <span class='chapter-title'>Summary</span>"
    ]
  }
]